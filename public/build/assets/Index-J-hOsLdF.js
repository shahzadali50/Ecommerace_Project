import{d as de,p as f,n as ue,c as ce,C as R,r as C,a as v,o as u,q as p,e as r,w as i,u as n,m as me,b as a,f as ve,t as s,g as b,P as pe,s as F,F as ge,l as fe,M as _e,W as V}from"./app-DhDN9clE.js";import{A as be}from"./AdminLayout-9U4AMh4l.js";import{V as T,D as ye}from"./dataTables.dataTables-vjKvatFD.js";import{_ as he}from"./useFlashMessages-DN6iFL0s.js";import"./ShoppingOutlined-e5E75mek.js";import"./LanguageSwitcher.vue_vue_type_script_setup_true_lang-CSXaFYAK.js";import"./FilterOutlined-CKq_DFFx.js";const xe={key:0,class:"loading-overlay"},Ce={class:"bg-white rounded-lg responsive-table p-4 shadow-md"},we={class:"mb-4 flex items-center justify-between"},ke={class:"text-lg font-semibold mb-4"},Ie={class:"mb-4"},$e={class:"block"},Le={key:0,class:"text-red-500"},Ue={class:"mb-4"},Se={class:"block"},Ee={key:0,class:"text-red-500"},De={class:"mb-4"},Ne={class:"block"},Ae={key:0,class:"text-red-500"},Re={key:1,class:"mt-2"},Fe={class:"text-sm text-gray-600 mb-1"},Pe=["src"],je={class:"text-right"},Me={class:"mb-4"},Be={class:"block"},Ve={key:0,class:"text-red-500"},Te={class:"mb-4"},qe={class:"block"},Oe={key:0,class:"text-red-500"},ze={class:"mb-4"},Ye={class:"block"},Xe={key:0,class:"mb-2"},We={class:"text-sm text-gray-500 mb-1"},Ge=["src"],He={class:"text-xs text-gray-500 mt-1"},Je={key:1,class:"text-red-500"},Ke={class:"mt-2 text-sm text-gray-500"},Qe={key:2,class:"mt-2"},Ze={class:"text-sm text-gray-600 mb-1"},et=["src"],tt={class:"text-right"},at={class:"text-md"},lt={class:"mb-4"},st={class:"block"},ot={key:0,class:"text-red-500"},nt={class:"mb-4"},rt={class:"block"},it={key:0,class:"text-red-500"},dt={class:"mb-4"},ut={class:"block"},ct={key:0,class:"text-red-500"},mt={key:1,class:"mt-2"},vt={class:"text-sm text-gray-600 mb-1"},pt=["src"],gt={class:"text-right"},ft={class:"flex justify-center p-4"},_t=["src"],bt={class:"mb-4"},yt={class:"block font-medium mb-2"},ht={class:"text-sm text-gray-500 mt-1"},xt={key:0,class:"text-red-500 mt-1"},Ct={class:"text-right"},wt=de({__name:"Index",props:{categories:{}},setup(kt){T.use(ye);const h=f(!1),q=l=>l?fe(l).format("DD-MM-YYYY hh:mm A"):"N/A",O=ue(),t=ce(()=>{var l;return((l=O.props.translations)==null?void 0:l.dashboard_all_pages)||{}}),g=R({name:"",description:"",id:null,image:null}),d=R({id:null,name:"",description:"",image:null,_method:"PUT"}),c=R({id:null,name:"",description:"",category_id:null,image:null}),w=f(!1),M=f(""),S=f(""),y=f(""),E=f(""),D=f(!1),B=f(""),k=f(!1),I=f(!1),$=f(!1),P=f(!1),L=R({excel_file:null}),z=[{title:t.value.sr||"Sr.",data:null,render:(l,e,_,m)=>m.row+1},{title:t.value.image||"Image",data:"image",orderable:!1,render:l=>l?`<img src="/storage/${l}" class="w-12 h-12 object-cover rounded mb-1 cursor-pointer" style="display:inline-block;" />`:'<span class="text-gray-400 mb-1">No Image</span>'},{title:t.value.name||"Name",data:"name"},{title:t.value.description||"Description",data:"description",render:l=>l??"N/A"},{title:t.value.created_at||"Created At",data:"created_at",render:l=>q(l)},{title:t.value.action||"Action",data:null,orderable:!1,render:(l,e,_)=>`
        <button class="edit-btn p-2" data-id="${_.id}" title="${t.value.edit||"Edit"}">
            <i class="fa fa-pencil-square-o text-green-500"></i>
        </button>
        <button class="delete-btn p-2" data-id="${_.id}" title="${t.value.delete||"Delete"}">
            <i class="fa fa-trash text-red-500"></i>
        </button>
        <button class="brand-btn p-2" data-id="${_.id}" title="${t.value.add_brand||"Add Brand"}">
            <i class="fa fa-creative-commons"></i>
        </button>
        <button class="related-brand-btn p-2" data-id="${_.slug}" title="${t.value.brand_list||"Brand List"}">
            <i class="fa fa-list text-slate-800"></i>
        </button>
    `}],Y={paging:!0,searching:!0,ordering:!0,responsive:!0,pageLength:10,createdRow:(l,e)=>{setTimeout(()=>{var _,m,N,A,x;(_=l.querySelector(".edit-btn"))==null||_.addEventListener("click",()=>Z(e)),(m=l.querySelector(".delete-btn"))==null||m.addEventListener("click",()=>K(e.id)),(N=l.querySelector(".brand-btn"))==null||N.addEventListener("click",()=>ee(e)),(A=l.querySelector(".related-brand-btn "))==null||A.addEventListener("click",()=>te(e)),(x=l.querySelector("img"))==null||x.addEventListener("click",()=>{e.image&&oe(e.image)})},0)}},X=()=>{g.reset(),y.value="",w.value=!0},W=l=>{const e=l.target;e.files&&e.files[0]&&(g.image=e.files[0],y.value=URL.createObjectURL(e.files[0]))},G=l=>{const e=l.target;e.files&&e.files[0]&&(c.image=e.files[0],y.value=URL.createObjectURL(e.files[0]))},H=l=>{const e=l.target;e.files&&e.files[0]&&(d.image=e.files[0],E.value=URL.createObjectURL(e.files[0]))},J=()=>{h.value=!0,g.post(route("admin.category.store"),{onSuccess:()=>{g.reset(),w.value=!1},onFinish:()=>{h.value=!1}})},K=l=>{_e.confirm({title:t.value.confirm_delete_title||"Are you sure you want to delete",content:t.value.confirm_delete_content_category||"Deleting this category will also remove all associated brands. This action is irreversible. Are you sure you want to proceed?",okText:t.value.confirm_delete_ok||"Yes, Delete",okType:"danger",cancelText:t.value.confirm_delete_cancel||"Cancel",onOk(){h.value=!0,g.delete(route("admin.category.delete",{id:l}),{onFinish:()=>{h.value=!1}})}})},Q=()=>{$.value=!0},Z=l=>{d.id=l.id,d.name=l.name,d.description=l.description,d.image=null,S.value=l.image,E.value="",k.value=!0},ee=l=>{M.value=l.name,c.category_id=l.id,I.value=!0},te=l=>{V.get(route("admin.related-brand-list",l.slug))},ae=()=>{h.value=!0,c.post(route("admin.brand.store"),{onSuccess:()=>{c.reset(),I.value=!1,y.value&&(URL.revokeObjectURL(y.value),y.value="")},onFinish:()=>{h.value=!1}})},le=()=>{h.value=!0,d.post(route("admin.category.update",{id:d.id}),{onSuccess:()=>{k.value=!1},onFinish:()=>{h.value=!1}})},se=l=>{if(!l)return"";const e=l.split("/");return e[e.length-1]},oe=l=>{B.value="/storage/"+l,D.value=!0},ne=()=>{P.value=!0;const l=new FormData;l.append("file",L.excel_file),V.post(route("admin.import.data"),l,{onSuccess:()=>{$.value=!1,L.reset()},onError:e=>{console.error("Import errors:",e)},onFinish:()=>{P.value=!1}})},re=l=>{const e=l.target;e.files&&e.files[0]&&(L.excel_file=e.files[0])};return(l,e)=>{const _=C("a-spin"),m=C("a-button"),N=C("a-col"),A=C("a-row"),x=C("a-input"),j=C("a-textarea"),U=C("a-modal");return u(),v(ge,null,[h.value?(u(),v("div",xe,[r(_,{size:"large"})])):p("",!0),r(be,null,{default:i(()=>[r(n(me),{title:t.value.category_title||"Category List"},null,8,["title"]),r(A,null,{default:i(()=>[r(N,{xs:24},{default:i(()=>{var o;return[a("div",Ce,[a("div",we,[a("h2",ke,s(t.value.category_title||"Category List"),1),a("div",null,[r(m,{onClick:e[0]||(e[0]=ie=>X()),type:"default"},{default:i(()=>[b(s(t.value.add_category||"Add Category"),1)]),_:1}),r(m,{onClick:e[1]||(e[1]=ie=>Q()),type:"default"},{default:i(()=>e[27]||(e[27]=[b(" Import Category ")])),_:1}),r(n(pe),{href:l.route("admin.category.log")},{default:i(()=>[r(m,{type:"default"},{default:i(()=>[b(s(t.value.category_logs||"Category Logs"),1)]),_:1})]),_:1},8,["href"])])]),(o=l.categories)!=null&&o.data?(u(),ve(n(T),{key:0,data:l.categories.data,columns:z,options:Y,class:"display"},{default:i(()=>[a("thead",null,[a("tr",null,[a("th",null,s(t.value.sr||"Sr."),1),a("th",null,s(t.value.image||"Image"),1),a("th",null,s(t.value.name||"Name"),1),a("th",null,s(t.value.description||"Description"),1),a("th",null,s(t.value.created_at||"Created At"),1),a("th",null,s(t.value.action||"Action"),1)])]),e[28]||(e[28]=a("tbody",null,null,-1))]),_:1},8,["data"])):p("",!0)])]}),_:1})]),_:1}),r(U,{open:w.value,"onUpdate:open":e[6]||(e[6]=o=>w.value=o),title:t.value.add_category||"Add Category",onCancel:e[7]||(e[7]=o=>w.value=!1),footer:null},{default:i(()=>[a("form",{onSubmit:e[5]||(e[5]=F(o=>J(),["prevent"])),enctype:"multipart/form-data"},[a("div",Ie,[a("label",$e,s(t.value.name||"Name"),1),r(x,{value:n(g).name,"onUpdate:value":e[2]||(e[2]=o=>n(g).name=o),class:"mt-2 w-full",placeholder:t.value.name_placeholder||"Enter Name"},null,8,["value","placeholder"]),n(g).errors.name?(u(),v("div",Le,s(n(g).errors.name),1)):p("",!0)]),a("div",Ue,[a("label",Se,s(t.value.description||"Description"),1),r(j,{value:n(g).description,"onUpdate:value":e[3]||(e[3]=o=>n(g).description=o),class:"mt-2 w-full",placeholder:t.value.eneter_description||"Enter Description","auto-size":{minRows:2,maxRows:5}},null,8,["value","placeholder"]),n(g).errors.description?(u(),v("div",Ee,s(n(g).errors.description),1)):p("",!0)]),a("div",De,[a("label",Ne,s(t.value.image||"Image"),1),a("input",{type:"file",onChange:W,accept:"image/*",class:"mt-2 w-full p-2 border rounded"},null,32),n(g).errors.image?(u(),v("div",Ae,s(n(g).errors.image),1)):p("",!0),y.value?(u(),v("div",Re,[a("p",Fe,s(t.value.preview||"Preview")+":",1),a("img",{src:y.value,alt:"Image Preview",class:"w-24 h-24 object-cover rounded border"},null,8,Pe)])):p("",!0)]),a("div",je,[r(m,{type:"default",onClick:e[4]||(e[4]=o=>w.value=!1)},{default:i(()=>[b(s(t.value.cancel||"Cancel"),1)]),_:1}),r(m,{type:"primary","html-type":"submit",class:"ml-2"},{default:i(()=>[b(s(t.value.add||"Add"),1)]),_:1})])],32)]),_:1},8,["open","title"]),r(U,{open:k.value,"onUpdate:open":e[12]||(e[12]=o=>k.value=o),title:t.value.update||"Edit Category",onCancel:e[13]||(e[13]=o=>k.value=!1),footer:null},{default:i(()=>[a("form",{onSubmit:e[11]||(e[11]=F(o=>le(),["prevent"])),enctype:"multipart/form-data"},[a("div",Me,[a("label",Be,s(t.value.name||"Name"),1),r(x,{value:n(d).name,"onUpdate:value":e[8]||(e[8]=o=>n(d).name=o),class:"mt-2 w-full",placeholder:t.value.name_placeholder||"Enter Name"},null,8,["value","placeholder"]),n(d).errors.name?(u(),v("div",Ve,s(n(d).errors.name),1)):p("",!0)]),a("div",Te,[a("label",qe,s(t.value.description||"Description"),1),r(j,{value:n(d).description,"onUpdate:value":e[9]||(e[9]=o=>n(d).description=o),class:"mt-2 w-full",placeholder:t.value.eneter_description||"Enter Description","auto-size":{minRows:2,maxRows:5}},null,8,["value","placeholder"]),n(d).errors.description?(u(),v("div",Oe,s(n(d).errors.description),1)):p("",!0)]),a("div",ze,[a("label",Ye,s(t.value.image||"Image"),1),S.value?(u(),v("div",Xe,[a("p",We,s(t.value.current_image||"Current Image"),1),a("img",{src:"/storage/"+S.value,alt:"Current Category Image",class:"w-24 h-24 object-cover rounded border"},null,8,Ge),a("p",He,s(se(S.value)),1)])):p("",!0),a("input",{type:"file",onChange:H,accept:"image/*",class:"mt-2 w-full p-2 border rounded"},null,32),n(d).errors.image?(u(),v("div",Je,s(n(d).errors.image),1)):p("",!0),a("div",Ke,s(t.value.keep_current_image||"Leave empty to keep the current image"),1),E.value?(u(),v("div",Qe,[a("p",Ze,s(t.value.new_image_preview||"New Image Preview")+":",1),a("img",{src:E.value,alt:"New Image Preview",class:"w-24 h-24 object-cover rounded border"},null,8,et)])):p("",!0)]),a("div",tt,[r(m,{type:"default",onClick:e[10]||(e[10]=o=>k.value=!1)},{default:i(()=>[b(s(t.value.cancel||"Cancel"),1)]),_:1}),r(m,{type:"primary","html-type":"submit",class:"ml-2"},{default:i(()=>[b(s(t.value.update||"Update"),1)]),_:1})])],32)]),_:1},8,["open","title"]),r(U,{open:I.value,"onUpdate:open":e[19]||(e[19]=o=>I.value=o),title:t.value.add_brand||"Add Brand",onCancel:e[20]||(e[20]=o=>I.value=!1),footer:null},{default:i(()=>[a("h4",at,s(t.value.category||"Category")+" ("+s(M.value)+")",1),a("form",{onSubmit:e[18]||(e[18]=F(o=>ae(),["prevent"])),enctype:"multipart/form-data"},[r(x,{hidden:"",value:n(c).category_id,"onUpdate:value":e[14]||(e[14]=o=>n(c).category_id=o),class:"mt-2 w-full",placeholder:t.value.name_placeholder||"Enter Name"},null,8,["value","placeholder"]),a("div",lt,[a("label",st,s(t.value.name||"Name"),1),r(x,{value:n(c).name,"onUpdate:value":e[15]||(e[15]=o=>n(c).name=o),class:"mt-2 w-full",placeholder:t.value.name_placeholder||"Enter Name"},null,8,["value","placeholder"]),n(c).errors.name?(u(),v("div",ot,s(n(c).errors.name),1)):p("",!0)]),a("div",nt,[a("label",rt,s(t.value.description||"Description"),1),r(j,{value:n(c).description,"onUpdate:value":e[16]||(e[16]=o=>n(c).description=o),class:"mt-2 w-full",placeholder:t.value.eneter_description||"Enter Description","auto-size":{minRows:2,maxRows:5}},null,8,["value","placeholder"]),n(c).errors.description?(u(),v("div",it,s(n(c).errors.description),1)):p("",!0)]),a("div",dt,[a("label",ut,s(t.value.image||"Image"),1),a("input",{type:"file",onChange:G,accept:"image/*",class:"mt-2 w-full p-2 border rounded"},null,32),n(c).errors.image?(u(),v("div",ct,s(n(c).errors.image),1)):p("",!0),y.value?(u(),v("div",mt,[a("p",vt,s(t.value.preview||"Preview")+":",1),a("img",{src:y.value,alt:"Image Preview",class:"w-24 h-24 object-cover rounded border"},null,8,pt)])):p("",!0)]),a("div",gt,[r(m,{type:"default",onClick:e[17]||(e[17]=o=>I.value=!1)},{default:i(()=>[b(s(t.value.cancel||"Cancel"),1)]),_:1}),r(m,{type:"primary","html-type":"submit",class:"ml-2"},{default:i(()=>[b(s(t.value.save||"Save"),1)]),_:1})])],32)]),_:1},8,["open","title"]),r(U,{open:D.value,"onUpdate:open":e[21]||(e[21]=o=>D.value=o),title:t.value.preview||"Image Preview",onCancel:e[22]||(e[22]=o=>D.value=!1),footer:null,width:"600px"},{default:i(()=>[a("div",ft,[a("img",{src:B.value,alt:"Full Size Image",class:"max-w-full max-h-[500px] object-cover"},null,8,_t)])]),_:1},8,["open","title"]),r(U,{open:$.value,"onUpdate:open":e[25]||(e[25]=o=>$.value=o),title:t.value.import_category||"Import Category",onCancel:e[26]||(e[26]=o=>$.value=!1),footer:null},{default:i(()=>[a("form",{onSubmit:e[24]||(e[24]=F(o=>ne(),["prevent"])),enctype:"multipart/form-data"},[a("div",bt,[a("label",yt,s(t.value.excel_file||"Excel File"),1),a("input",{type:"file",onChange:re,accept:".xlsx,.xls,.csv",class:"mt-2 w-full p-2 border rounded",required:""},null,32),a("div",ht,s(t.value.supported_formats||"Supported formats: XLSX, XLS, CSV"),1),n(L).errors.excel_file?(u(),v("div",xt,s(n(L).errors.excel_file),1)):p("",!0)]),a("div",Ct,[r(m,{type:"default",onClick:e[23]||(e[23]=o=>$.value=!1)},{default:i(()=>[b(s(t.value.cancel||"Cancel"),1)]),_:1}),r(m,{type:"primary","html-type":"submit",class:"ml-2",loading:P.value},{default:i(()=>[b(s(t.value.import||"Import"),1)]),_:1},8,["loading"])])],32)]),_:1},8,["open","title"])]),_:1})],64)}}}),Nt=he(wt,[["__scopeId","data-v-8e05e7a8"]]);export{Nt as default};
