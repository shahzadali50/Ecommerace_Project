import{d as de,q as g,l as ue,C as R,r as C,a as p,o as u,s as v,e as r,w as i,u as t,m as ce,b as l,f as me,t as o,g as b,P as pe,v as F,F as ve,p as fe,M as ge,W as V}from"./app-CdgPAu8Y.js";import{A as _e}from"./AdminLayout-BWcSSClD.js";import{V as T,D as be}from"./dataTables.dataTables-9BNxxJIC.js";import{_ as ye}from"./useFlashMessages-D767BWGM.js";import"./ShoppingOutlined-Cfvz3sAq.js";import"./OrderedListOutlined-BgvSpS2i.js";import"./LanguageSwitcher.vue_vue_type_script_setup_true_lang-DJtKA5Sq.js";import"./FilterOutlined-bsiGSPnG.js";const he={key:0,class:"loading-overlay"},xe={class:"bg-white rounded-lg responsive-table p-4 shadow-md"},Ce={class:"mb-4 flex items-center justify-between"},ke={class:"text-lg font-semibold mb-4"},we={class:"mb-4"},Ie={class:"block"},$e={key:0,class:"text-red-500"},Le={class:"mb-4"},Ue={class:"block"},Se={key:0,class:"text-red-500"},Ee={class:"mb-4"},De={class:"block"},Ne={key:0,class:"text-red-500"},Ae={key:1,class:"mt-2"},Re={class:"text-sm text-gray-600 mb-1"},Fe=["src"],Pe={class:"text-right"},je={class:"mb-4"},Me={class:"block"},Be={key:0,class:"text-red-500"},Ve={class:"mb-4"},Te={class:"block"},qe={key:0,class:"text-red-500"},Oe={class:"mb-4"},ze={class:"block"},Ye={key:0,class:"mb-2"},Xe={class:"text-sm text-gray-500 mb-1"},We=["src"],Ge={class:"text-xs text-gray-500 mt-1"},He={key:1,class:"text-red-500"},Je={class:"mt-2 text-sm text-gray-500"},Ke={key:2,class:"mt-2"},Qe={class:"text-sm text-gray-600 mb-1"},Ze=["src"],et={class:"text-right"},tt={class:"text-md"},st={class:"mb-4"},lt={class:"block"},at={key:0,class:"text-red-500"},ot={class:"mb-4"},nt={class:"block"},rt={key:0,class:"text-red-500"},it={class:"mb-4"},dt={class:"block"},ut={key:0,class:"text-red-500"},ct={key:1,class:"mt-2"},mt={class:"text-sm text-gray-600 mb-1"},pt=["src"],vt={class:"text-right"},ft={class:"flex justify-center p-4"},gt=["src"],_t={class:"mb-4"},bt={class:"block font-medium mb-2"},yt={class:"text-sm text-gray-500 mt-1"},ht={key:0,class:"text-red-500 mt-1"},xt={class:"text-right"},Ct=de({__name:"Index",props:{categories:{}},setup(kt){T.use(be);const h=g(!1),q=a=>a?fe(a).format("DD-MM-YYYY hh:mm A"):"N/A",{appContext:O}=ue(),s=O.config.globalProperties.$t,f=R({name:"",description:"",id:null,image:null}),d=R({id:null,name:"",description:"",image:null,_method:"PUT"}),c=R({id:null,name:"",description:"",category_id:null,image:null}),k=g(!1),M=g(""),S=g(""),y=g(""),E=g(""),D=g(!1),B=g(""),w=g(!1),I=g(!1),$=g(!1),P=g(!1),L=R({excel_file:null}),z=[{title:s("Sr."),data:null,render:(a,e,_,m)=>m.row+1},{title:s("Image"),data:"image",orderable:!1,render:a=>a?`<img src="/storage/${a}" class="w-12 h-12 object-cover rounded mb-1 cursor-pointer" style="display:inline-block;" />`:'<span class="text-gray-400 mb-1">No Image</span>'},{title:s("Name"),data:"name"},{title:s("Description"),data:"description",render:a=>a??"N/A"},{title:s("Created At"),data:"created_at",render:a=>q(a)},{title:s("Action"),data:null,orderable:!1,render:(a,e,_)=>`
        <button class="edit-btn p-2" data-id="${_.id}" title="${s("Edit")}">
            <i class="fa fa-pencil-square-o text-green-500"></i>
        </button>
        <button class="delete-btn p-2" data-id="${_.id}" title="${s("Delete")}">
            <i class="fa fa-trash text-red-500"></i>
        </button>
        <button class="brand-btn p-2" data-id="${_.id}" title="${s("Add Brand")}">
            <i class="fa fa-creative-commons"></i>
        </button>
        <button class="related-brand-btn p-2" data-id="${_.slug}" title="${s("Brand List")}">
            <i class="fa fa-list text-slate-800"></i>
        </button>
    `}],Y={paging:!0,searching:!0,ordering:!0,responsive:!0,pageLength:10,createdRow:(a,e)=>{setTimeout(()=>{var _,m,N,A,x;(_=a.querySelector(".edit-btn"))==null||_.addEventListener("click",()=>Z(e)),(m=a.querySelector(".delete-btn"))==null||m.addEventListener("click",()=>K(e.id)),(N=a.querySelector(".brand-btn"))==null||N.addEventListener("click",()=>ee(e)),(A=a.querySelector(".related-brand-btn "))==null||A.addEventListener("click",()=>te(e)),(x=a.querySelector("img"))==null||x.addEventListener("click",()=>{e.image&&oe(e.image)})},0)}},X=()=>{f.reset(),y.value="",k.value=!0},W=a=>{const e=a.target;e.files&&e.files[0]&&(f.image=e.files[0],y.value=URL.createObjectURL(e.files[0]))},G=a=>{const e=a.target;e.files&&e.files[0]&&(c.image=e.files[0],y.value=URL.createObjectURL(e.files[0]))},H=a=>{const e=a.target;e.files&&e.files[0]&&(d.image=e.files[0],E.value=URL.createObjectURL(e.files[0]))},J=()=>{h.value=!0,f.post(route("admin.category.store"),{onSuccess:()=>{f.reset(),k.value=!1},onFinish:()=>{h.value=!1}})},K=a=>{ge.confirm({title:s("Are you sure you want to delete"),content:s("Deleting this category will also remove all associated brands. This action is irreversible. Are you sure you want to proceed?"),okText:s("Yes, Delete"),okType:"danger",cancelText:s("Cancel"),onOk(){h.value=!0,f.delete(route("admin.category.delete",{id:a}),{onFinish:()=>{h.value=!1}})}})},Q=()=>{$.value=!0},Z=a=>{d.id=a.id,d.name=a.name,d.description=a.description,d.image=null,S.value=a.image,E.value="",w.value=!0},ee=a=>{M.value=a.name,c.category_id=a.id,I.value=!0},te=a=>{V.get(route("admin.related-brand-list",a.slug))},se=()=>{h.value=!0,c.post(route("admin.brand.store"),{onSuccess:()=>{c.reset(),I.value=!1,y.value&&(URL.revokeObjectURL(y.value),y.value="")},onFinish:()=>{h.value=!1}})},le=()=>{h.value=!0,d.post(route("admin.category.update",{id:d.id}),{onSuccess:()=>{w.value=!1},onFinish:()=>{h.value=!1}})},ae=a=>{if(!a)return"";const e=a.split("/");return e[e.length-1]},oe=a=>{B.value="/storage/"+a,D.value=!0},ne=()=>{P.value=!0;const a=new FormData;a.append("file",L.excel_file),V.post(route("admin.import.data"),a,{onSuccess:()=>{$.value=!1,L.reset()},onError:e=>{console.error("Import errors:",e)},onFinish:()=>{P.value=!1}})},re=a=>{const e=a.target;e.files&&e.files[0]&&(L.excel_file=e.files[0])};return(a,e)=>{const _=C("a-spin"),m=C("a-button"),N=C("a-col"),A=C("a-row"),x=C("a-input"),j=C("a-textarea"),U=C("a-modal");return u(),p(ve,null,[h.value?(u(),p("div",he,[r(_,{size:"large"})])):v("",!0),r(_e,null,{default:i(()=>[r(t(ce),{title:t(s)("Category List")},null,8,["title"]),r(A,null,{default:i(()=>[r(N,{xs:24},{default:i(()=>{var n;return[l("div",xe,[l("div",Ce,[l("h2",ke,o(t(s)("Category List")),1),l("div",null,[r(m,{onClick:e[0]||(e[0]=ie=>X()),type:"default"},{default:i(()=>[b(o(t(s)("Add Category")),1)]),_:1}),r(m,{onClick:e[1]||(e[1]=ie=>Q()),type:"default"},{default:i(()=>e[27]||(e[27]=[b(" Import Category ")])),_:1}),r(t(pe),{href:a.route("admin.category.log")},{default:i(()=>[r(m,{type:"default"},{default:i(()=>[b(o(t(s)("Category Logs")),1)]),_:1})]),_:1},8,["href"])])]),(n=a.categories)!=null&&n.data?(u(),me(t(T),{key:0,data:a.categories.data,columns:z,options:Y,class:"display"},{default:i(()=>[l("thead",null,[l("tr",null,[l("th",null,o(t(s)("Sr.")),1),l("th",null,o(t(s)("Image")),1),l("th",null,o(t(s)("Name")),1),l("th",null,o(t(s)("Description")),1),l("th",null,o(t(s)("Created At")),1),l("th",null,o(t(s)("Action")),1)])]),e[28]||(e[28]=l("tbody",null,null,-1))]),_:1},8,["data"])):v("",!0)])]}),_:1})]),_:1}),r(U,{open:k.value,"onUpdate:open":e[6]||(e[6]=n=>k.value=n),title:t(s)("Add Category"),onCancel:e[7]||(e[7]=n=>k.value=!1),footer:null},{default:i(()=>[l("form",{onSubmit:e[5]||(e[5]=F(n=>J(),["prevent"])),enctype:"multipart/form-data"},[l("div",we,[l("label",Ie,o(t(s)("Name")),1),r(x,{value:t(f).name,"onUpdate:value":e[2]||(e[2]=n=>t(f).name=n),class:"mt-2 w-full",placeholder:t(s)("Enter Name")},null,8,["value","placeholder"]),t(f).errors.name?(u(),p("div",$e,o(t(f).errors.name),1)):v("",!0)]),l("div",Le,[l("label",Ue,o(t(s)("Description")),1),r(j,{value:t(f).description,"onUpdate:value":e[3]||(e[3]=n=>t(f).description=n),class:"mt-2 w-full",placeholder:t(s)("Enter Description"),"auto-size":{minRows:2,maxRows:5}},null,8,["value","placeholder"]),t(f).errors.description?(u(),p("div",Se,o(t(f).errors.description),1)):v("",!0)]),l("div",Ee,[l("label",De,o(t(s)("Image")),1),l("input",{type:"file",onChange:W,accept:"image/*",class:"mt-2 w-full p-2 border rounded"},null,32),t(f).errors.image?(u(),p("div",Ne,o(t(f).errors.image),1)):v("",!0),y.value?(u(),p("div",Ae,[l("p",Re,o(t(s)("Preview"))+":",1),l("img",{src:y.value,alt:"Image Preview",class:"w-24 h-24 object-cover rounded border"},null,8,Fe)])):v("",!0)]),l("div",Pe,[r(m,{type:"default",onClick:e[4]||(e[4]=n=>k.value=!1)},{default:i(()=>[b(o(t(s)("Cancel")),1)]),_:1}),r(m,{type:"primary","html-type":"submit",class:"ml-2"},{default:i(()=>[b(o(t(s)("Add")),1)]),_:1})])],32)]),_:1},8,["open","title"]),r(U,{open:w.value,"onUpdate:open":e[12]||(e[12]=n=>w.value=n),title:t(s)("Edit Category"),onCancel:e[13]||(e[13]=n=>w.value=!1),footer:null},{default:i(()=>[l("form",{onSubmit:e[11]||(e[11]=F(n=>le(),["prevent"])),enctype:"multipart/form-data"},[l("div",je,[l("label",Me,o(t(s)("Name")),1),r(x,{value:t(d).name,"onUpdate:value":e[8]||(e[8]=n=>t(d).name=n),class:"mt-2 w-full",placeholder:t(s)("Enter Name")},null,8,["value","placeholder"]),t(d).errors.name?(u(),p("div",Be,o(t(d).errors.name),1)):v("",!0)]),l("div",Ve,[l("label",Te,o(t(s)("Description")),1),r(j,{value:t(d).description,"onUpdate:value":e[9]||(e[9]=n=>t(d).description=n),class:"mt-2 w-full",placeholder:t(s)("Enter Description"),"auto-size":{minRows:2,maxRows:5}},null,8,["value","placeholder"]),t(d).errors.description?(u(),p("div",qe,o(t(d).errors.description),1)):v("",!0)]),l("div",Oe,[l("label",ze,o(t(s)("Image")),1),S.value?(u(),p("div",Ye,[l("p",Xe,o(t(s)("Current Image")),1),l("img",{src:"/storage/"+S.value,alt:"Current Category Image",class:"w-24 h-24 object-cover rounded border"},null,8,We),l("p",Ge,o(ae(S.value)),1)])):v("",!0),l("input",{type:"file",onChange:H,accept:"image/*",class:"mt-2 w-full p-2 border rounded"},null,32),t(d).errors.image?(u(),p("div",He,o(t(d).errors.image),1)):v("",!0),l("div",Je,o(t(s)("Leave empty to keep the current image")),1),E.value?(u(),p("div",Ke,[l("p",Qe,o(t(s)("New Image Preview"))+":",1),l("img",{src:E.value,alt:"New Image Preview",class:"w-24 h-24 object-cover rounded border"},null,8,Ze)])):v("",!0)]),l("div",et,[r(m,{type:"default",onClick:e[10]||(e[10]=n=>w.value=!1)},{default:i(()=>[b(o(t(s)("Cancel")),1)]),_:1}),r(m,{type:"primary","html-type":"submit",class:"ml-2"},{default:i(()=>[b(o(t(s)("Update")),1)]),_:1})])],32)]),_:1},8,["open","title"]),r(U,{open:I.value,"onUpdate:open":e[19]||(e[19]=n=>I.value=n),title:t(s)("Add Brand"),onCancel:e[20]||(e[20]=n=>I.value=!1),footer:null},{default:i(()=>[l("h4",tt,o(t(s)("Category"))+" ("+o(M.value)+")",1),l("form",{onSubmit:e[18]||(e[18]=F(n=>se(),["prevent"])),enctype:"multipart/form-data"},[r(x,{hidden:"",value:t(c).category_id,"onUpdate:value":e[14]||(e[14]=n=>t(c).category_id=n),class:"mt-2 w-full",placeholder:t(s)("Enter Name")},null,8,["value","placeholder"]),l("div",st,[l("label",lt,o(t(s)("Name")),1),r(x,{value:t(c).name,"onUpdate:value":e[15]||(e[15]=n=>t(c).name=n),class:"mt-2 w-full",placeholder:t(s)("Enter Name")},null,8,["value","placeholder"]),t(c).errors.name?(u(),p("div",at,o(t(c).errors.name),1)):v("",!0)]),l("div",ot,[l("label",nt,o(t(s)("Description")),1),r(j,{value:t(c).description,"onUpdate:value":e[16]||(e[16]=n=>t(c).description=n),class:"mt-2 w-full",placeholder:t(s)("Enter Description"),"auto-size":{minRows:2,maxRows:5}},null,8,["value","placeholder"]),t(c).errors.description?(u(),p("div",rt,o(t(c).errors.description),1)):v("",!0)]),l("div",it,[l("label",dt,o(t(s)("Image")),1),l("input",{type:"file",onChange:G,accept:"image/*",class:"mt-2 w-full p-2 border rounded"},null,32),t(c).errors.image?(u(),p("div",ut,o(t(c).errors.image),1)):v("",!0),y.value?(u(),p("div",ct,[l("p",mt,o(t(s)("Preview"))+":",1),l("img",{src:y.value,alt:"Image Preview",class:"w-24 h-24 object-cover rounded border"},null,8,pt)])):v("",!0)]),l("div",vt,[r(m,{type:"default",onClick:e[17]||(e[17]=n=>I.value=!1)},{default:i(()=>[b(o(t(s)("Cancel")),1)]),_:1}),r(m,{type:"primary","html-type":"submit",class:"ml-2"},{default:i(()=>[b(o(t(s)("Save")),1)]),_:1})])],32)]),_:1},8,["open","title"]),r(U,{open:D.value,"onUpdate:open":e[21]||(e[21]=n=>D.value=n),title:t(s)("Image Preview"),onCancel:e[22]||(e[22]=n=>D.value=!1),footer:null,width:"600px"},{default:i(()=>[l("div",ft,[l("img",{src:B.value,alt:"Full Size Image",class:"max-w-full max-h-[500px] object-cover"},null,8,gt)])]),_:1},8,["open","title"]),r(U,{open:$.value,"onUpdate:open":e[25]||(e[25]=n=>$.value=n),title:t(s)("Import Category"),onCancel:e[26]||(e[26]=n=>$.value=!1),footer:null},{default:i(()=>[l("form",{onSubmit:e[24]||(e[24]=F(n=>ne(),["prevent"])),enctype:"multipart/form-data"},[l("div",_t,[l("label",bt,o(t(s)("Excel File")),1),l("input",{type:"file",onChange:re,accept:".xlsx,.xls,.csv",class:"mt-2 w-full p-2 border rounded",required:""},null,32),l("div",yt,o(t(s)("Supported formats: XLSX, XLS, CSV")),1),t(L).errors.excel_file?(u(),p("div",ht,o(t(L).errors.excel_file),1)):v("",!0)]),l("div",xt,[r(m,{type:"default",onClick:e[23]||(e[23]=n=>$.value=!1)},{default:i(()=>[b(o(t(s)("Cancel")),1)]),_:1}),r(m,{type:"primary","html-type":"submit",class:"ml-2",loading:P.value},{default:i(()=>[b(o(t(s)("Import")),1)]),_:1},8,["loading"])])],32)]),_:1},8,["open","title"])]),_:1})],64)}}}),Nt=ye(Ct,[["__scopeId","data-v-d11f8029"]]);export{Nt as default};
